<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transfer Pembayaran</title>
  <link rel="icon" href="https://validusgrp.com/wp-content/themes/validus/favicon.ico">
  <style>
    :root {
      --bg:#0f1720;
      --card: rgba(255,255,255,0.1);
      --text:#e6eef8;
      --accent:#102e58;
      --muted:rgba(230,238,248,0.7);
      --success:#16a34a;
      --danger:#d32f2f;
      --glass: rgba(255,255,255,0.06);
    }
    .light {
      --bg:#f5f7fb;
      --card:#ffffff;
      --text:#102e58;
      --accent:#102e58;
      --muted:#546e7a;
      --glass: rgba(16,46,88,0.04);
    }
    html, body {
      height:100%;
      margin:0;
      font-family:Inter, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* Page background and blur */
    .page {
      position: relative;
      min-height: 100vh;
      padding: 88px 16px 48px;
      overflow: hidden;
      box-sizing: border-box;
    }
    .page::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url('https://images.pexels.com/photos/4147341/pexels-photo-4147341.jpeg');
      background-size: cover;
      background-position: center;
      z-index: -2;
      filter: brightness(0.9);
    }
    .page::after {
      content: "";
      position: fixed;
      inset: 0;
      backdrop-filter: blur(4px);
      background-color: rgba(15, 23, 32, 0.2);
      z-index: -1;
      pointer-events: none;
      transition: backdrop-filter 0.3s ease, background-color 0.3s ease;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 18px;
      background: var(--glass);
      backdrop-filter: blur(6px);
      z-index: 2000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .brand {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .brand img {
      height: 36px;
    }
    .controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .select, .toggle {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.06);
      color: var(--text);
      padding: 6px 8px;
      border-radius: 6px;
    }
    .toggle { cursor: pointer; }

    /* Loading overlay */
    #loadingOverlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 18px;
      background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.6));
      z-index: 1500;
      color: var(--text);
      font-weight: 600;
      font-size: 16px;
    }
    .spinner {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 6px solid rgba(255,255,255,0.12);
      border-top-color: var(--accent);
      animation: spin 1s linear infinite;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Card */
    .card {
      max-width: 520px;
      margin: 40px auto;
      background: var(--card);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.5);
      backdrop-filter: blur(6px);
      color: var(--text);
      display: none;
    }
    .bank-logo {
      display: block;
      margin: 8px auto 18px;
      width: 160px;
      height: auto;
      object-fit: contain;
    }
    .rekening-info {
      text-align: center;
      margin-bottom: 18px;
    }
    .rekening-info strong {
      display: block;
      margin-top: 8px;
      color: var(--muted);
      font-size: 13px;
    }
    .rekening-info > div {
      font-weight: 700;
      font-size: 20px;
      letter-spacing: 0.4px;
      margin-top: 4px;
    }
    .rekening-number { font-size: 20px; }
    .success {
      color: var(--success);
      margin-top: 6px;
      display: none;
    }

    /* Sections */
    .section { text-align: center; margin-bottom: 18px; }
    .label { font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    .value { font-weight: 700; font-size: 20px; letter-spacing: 0.4px; color: var(--text); }
    .name { font-size: 18px; font-weight: 700; color: var(--text); margin-top: 6px; }
    .input-row { display: flex; gap: 10px; align-items: center; justify-content: center; margin-top: 10px; }
    .amount-input {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.08);
      width: 100%;
      max-width: 300px;
      text-align: center;
      font-weight: 700;
    }
    .btn {
      display: inline-block;
      padding: 10px 12px;
      background: var(--accent);
      color: #fff;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      text-decoration: none;
    }
    .btn.secondary { background: transparent; color: var(--text); border:1px solid rgba(255,255,255,0.06); }
    .btn.danger { background: var(--danger); }

    /* Toast */
    .toast {
      position: fixed;
      right: 18px;
      bottom: 18px;
      background: var(--success);
      color: #fff;
      padding: 10px 14px;
      border-radius: 8px;
      display: none;
      align-items: center;
      gap: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }

    .instructions {
      text-align: left;
      color: var(--muted);
      font-size: 13px;
      margin-top: 14px;
      line-height: 1.4;
    }
    .footer-note { text-align: center; font-size: 12px; color: var(--muted); margin-top: 12px; }

    /* Responsive */
    @media (max-width:520px) {
      .card { margin: 24px 18px; padding: 18px; }
      header { padding: 8px 12px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="https://validusgrp.com/wp-content/uploads/2022/04/validus-capital-logo-red.png" alt="Brand" />
    </div>
    <div class="controls">
      <select id="langSelect" class="select" aria-label="Pilih bahasa">
        <option value="id">Indonesia</option>
        <option value="en">English</option>
        <option value="zh">中文</option>
      </select>
      <button id="themeToggle" class="toggle" title="Toggle dark/light">Dark</button>
    </div>
  </header>

  <main class="page" id="pageRoot">
    <div id="loadingOverlay" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      <div id="loadingText">Memuat data rekening...</div>
    </div>

    <article class="card" id="card" role="region" aria-labelledby="title">
      <img id="bankLogo" class="bank-logo" src="https://upload.wikimedia.org/wikipedia/commons/6/68/BANK_BRI_logo.svg" alt="Logo Bank">
      <div class="rekening-info">
        <strong>Nama Rekening:</strong> <div id="holderName">-</div>
        <strong>Nomor Rekening:</strong> <div class="rekening-number" id="acctNumber">-</div>
        <button class="btn" id="copyAcctBtn">Salin Nomor Rekening</button>
        <div class="success" id="copy-number-success">✅ Nomor rekening berhasil disalin</div>
      </div>

      <div class="section">
        <div class="label" id="labelAmount">Jumlah Transfer (Rp)</div>
        <div class="input-row">
          <input type="text" id="amountInput" class="amount-input" placeholder="Misal: 1500000" inputmode="numeric" />
          <button id="copyAmountBtn" class="btn">Salin</button>
        </div>
        <div id="amountHint" class="instructions" style="text-align:center; margin-top:10px">
          Silakan ketik jumlah transfer dengan angka.
        </div>
      </div>

      <a id="confirmBtn" class="btn" href="https://platform00.com/index/my/index" target="_blank" rel="noopener">Saya sudah membayarkannya</a>

      <div class="instructions">
        <strong id="labelInstr">Petunjuk：</strong>
        <ol id="instrList">
          <li id="instr1">Untuk transfer, silakan klik "Salin nomor rekening", dan buka online banking, mobile banking, atau ATM untuk menyelesaikan transfer dan mengisi ulang.</li>
          <li id="instr2">Setelah proses isi ulang telah dilakukan, kirimkan bukti transaksi yang berhasil kepada mentor/guru. Apabila dalam rentang waktu 15–20 menit belum melakukan pembayaran, harap refresh halaman terlebih dahulu, karena nomor rekening dapat berubah sewaktu-waktu.</li>
        </ol>
      </div>

      <div class="footer-note" id="footerNote">Copyright © <span id="year"></span> Validus. All rights reserved.</div>
    </article>

    <div class="toast" id="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <span id="toastText">Berhasil disalin</span>
    </div>
  </main>

  <script>
    // ====== Constants ======
    const API_URL = "https://script.google.com/macros/s/AKfycbyo4cv-kHFZYlKpDfauCDYAfqZB0dX-7d0r6i5d6oz8qRVwNyCk2INWYE9FbOyzezvr/exec";
    const defaultLogo = "https://upload.wikimedia.org/wikipedia/commons/3/3f/Bank_icon.svg";
    const bankLogos = {
      bri: "https://upload.wikimedia.org/wikipedia/commons/6/68/BANK_BRI_logo.svg",
      bca: "https://upload.wikimedia.org/wikipedia/commons/5/5c/Bank_Central_Asia.svg",
      danamon: "https://upload.wikimedia.org/wikipedia/commons/7/7b/Danamon.svg",
      sinarmas: "https://www.sinarmas.com/blog/wp-content/uploads/2016/10/cropped-sm-logo-2.png",
      cimb: "https://upload.wikimedia.org/wikipedia/commons/3/38/CIMB_Niaga_logo.svg",
      mandiri: "https://upload.wikimedia.org/wikipedia/commons/a/ad/Bank_Mandiri_logo_2016.svg",
      bni: "https://upload.wikimedia.org/wikipedia/commons/8/8e/BNI_logo.svg"
    };

    // ====== Elements ======
    const els = {
      loadingOverlay: document.getElementById('loadingOverlay'),
      loadingText: document.getElementById('loadingText'),
      bankLogo: document.getElementById('bankLogo'),
      holderName: document.getElementById('holderName'),
      acctNumber: document.getElementById('acctNumber'),
      copyAcctBtn: document.getElementById('copyAcctBtn'),
      amountInput: document.getElementById('amountInput'),
      copyAmountBtn: document.getElementById('copyAmountBtn'),
      amountHint: document.getElementById('amountHint'),
      confirmBtn: document.getElementById('confirmBtn'),
      instr1: document.getElementById('instr1'),
      instr2: document.getElementById('instr2'),
      labelInstr: document.getElementById('labelInstr'),
      toast: document.getElementById('toast'),
      toastText: document.getElementById('toastText'),
      langSelect: document.getElementById('langSelect'),
      themeToggle: document.getElementById('themeToggle'),
      yearEl: document.getElementById('year')
    };

    // ====== Utils ======
    function showToast(msg){
      els.toastText.textContent = msg;
      els.toast.style.display = 'flex';
      setTimeout(() => els.toast.style.display = 'none', 2500);
    }
    function onlyDigits(s){ return (s||'').toString().replace(/[^\d]/g,''); }
    function formatRp(n){ if(!n) return ''; return 'Rp ' + Number(n).toLocaleString('id-ID'); }

    function setBankLogoByName(name){
      let logo = defaultLogo;
      if(name){
        const key = name.toLowerCase();
        for(const k in bankLogos){
          if(key.includes(k)){
            logo = bankLogos[k];
            break;
          }
        }
      }
      els.bankLogo.src = logo;
      els.bankLogo.alt = name ? `Logo Bank ${name}` : "Logo Bank";
      els.bankLogo.onerror = function(){ this.onerror=null; this.src = defaultLogo; };
    }

    // ====== Translations ======
    const T = {
      id: {
        loading: "Memuat data rekening...",
        copyAccount: "Salin Nomor Rekening",
        copyAmount: "Salin",
        confirm: "Saya sudah membayarkannya",
        instrTitle: "Petunjuk：",
        instr1: 'Untuk transfer, silakan klik "Salin nomor rekening", dan buka online banking, mobile banking, atau ATM untuk menyelesaikan transfer dan mengisi ulang.',
        instr2: 'Setelah proses isi ulang telah dilakukan, kirimkan bukti transaksi yang berhasil kepada mentor/guru. Apabila dalam rentang waktu 15–20 menit belum melakukan pembayaran, harap refresh halaman terlebih dahulu, karena nomor rekening dapat berubah sewaktu-waktu.',
        copiedAcct: "Berhasil menyalin nomor rekening",
        copiedAmount: "Berhasil menyalin jumlah transfer",
        errLoad: "Terjadi kesalahan saat memuat data."
      },
      en: { /* ... sama seperti sebelumnya ... */ },
      zh: { /* ... sama seperti sebelumnya ... */ }
    };

    // ====== Apply Translations ======
    function applyTranslations(lang){
      const t = T[lang] || T.id;
      els.loadingText.textContent = t.loading;
      els.copyAcctBtn.textContent = t.copyAccount;
      els.copyAmountBtn.textContent = t.copyAmount;
      els.confirmBtn.textContent = t.confirm;
      els.instr1.textContent = t.instr1;
      els.instr2.textContent = t.instr2;
      els.labelInstr.textContent = t.instrTitle;
      els.amountHint.textContent = t.amountPlaceholder || 'Silakan ketik jumlah transfer dengan angka.';
      els.yearEl.textContent = new Date().getFullYear();
    }

    // ====== Language and Theme ======
    function loadLang(){
      const saved = localStorage.getItem('rk_lang') || (navigator.language || 'id').slice(0,2);
      const lang = ['id','en','zh'].includes(saved) ? saved : 'id';
      els.langSelect.value = lang;
      applyTranslations(lang);
    }
    function saveLangAndApply(v){
      localStorage.setItem('rk_lang', v);
      applyTranslations(v);
    }
    function loadTheme(){
      const saved = localStorage.getItem('rk_theme') || 'dark';
      if(saved === 'light') document.documentElement.classList.add('light');
      else document.documentElement.classList.remove('light');
      els.themeToggle.textContent = saved === 'light' ? 'Light' : 'Dark';
    }
    function toggleTheme(){
      const isLight = document.documentElement.classList.toggle('light');
      localStorage.setItem('rk_theme', isLight ? 'light' : 'dark');
      els.themeToggle.textContent = isLight ? 'Light' : 'Dark';
    }

    // ====== Events ======
    els.langSelect.addEventListener('change', e => saveLangAndApply(e.target.value));
    els.themeToggle.addEventListener('click', toggleTheme);
    els.copyAcctBtn.addEventListener('click', () => {
      const txt = els.acctNumber.textContent || '';
      if(!txt || txt === '-') return;
      navigator.clipboard.writeText(onlyDigits(txt)).then(() => {
        const lang = localStorage.getItem('rk_lang') || 'id';
        showToast(T[lang].copiedAcct);
      });
    });
    els.copyAmountBtn.addEventListener('click', () => {
      const txt = els.amountInput.value || '';
      if(!txt) return;
      navigator.clipboard.writeText(onlyDigits(txt)).then(() => {
        const lang = localStorage.getItem('rk_lang') || 'id';
        showToast(T[lang].copiedAmount);
      });
    });

    // ====== Load Data ======
    fetch(API_URL)
      .then(res => res.json())
      .then(data => {
        els.holderName.textContent = data.name || '-';
        els.acctNumber.textContent = data.number || '-';
        els.amountInput.value = data.amount || '';
        setBankLogoByName(data.bank);
        els.loadingOverlay.style.display = 'none';
        document.getElementById('card').style.display = 'block';
      })
      .catch(err => {
        els.loadingText.textContent = T.id.errLoad;
        console.error(err);
      });

    loadLang();
    loadTheme();
  </script>
</body>
</html>
